import{j as e,u as a,G as r,i as o,P as i,h as s,y as n,l as t,ax as l,ay as c,Y as d,C as u,a4 as p,e as m,a5 as g,av as v,Q as f,az as h,aa as x,am as j,F as b,H as N,aA as y}from"./chunk-4zK531Ye.js";import{r as P,a as w,u as C,d as _,L as S}from"./chunk-CntFpdkq.js";import{d as E,B as T,C as M,a as R,b as A,g as q,c as F}from"./chunk-DSSkY553.js";import{u as k}from"./chunk-BqkP3x14.js";import{c as L,b as I,d as G,u as B,L as z,S as O,e as D,f as V,g as $,h as U}from"./chunk-DySFepNw.js";function H(a,r=[]){let o=[];const i=()=>{const e=o.map(e=>P.createContext(e));return function(r){const o=(null==r?void 0:r[a])||e;return P.useMemo(()=>({[`__scope${a}`]:{...r,[a]:o}}),[r,o])}};return i.scopeName=a,[function(r,i){const s=P.createContext(i),n=o.length;function t(r){const{scope:o,children:i,...t}=r,l=(null==o?void 0:o[a][n])||s,c=P.useMemo(()=>t,Object.values(t));return e.jsx(l.Provider,{value:c,children:i})}return o=[...o,i],t.displayName=r+"Provider",[t,function(e,o){const t=(null==o?void 0:o[a][n])||s,l=P.useContext(t);if(l)return l;if(void 0!==i)return i;throw new Error(`\`${e}\` must be used within \`${r}\``)}]},Z(i,...r)]}function Z(...e){const a=e[0];if(1===e.length)return a;const r=()=>{const r=e.map(e=>({useScope:e(),scopeName:e.scopeName}));return function(e){const o=r.reduce((a,{useScope:r,scopeName:o})=>({...a,...r(e)[`__scope${o}`]}),{});return P.useMemo(()=>({[`__scope${a.scopeName}`]:o}),[o])}};return r.scopeName=a.scopeName,r}function K(...e){const a=e[0];if(1===e.length)return a;const r=()=>{const r=e.map(e=>({useScope:e(),scopeName:e.scopeName}));return function(e){const o=r.reduce((a,{useScope:r,scopeName:o})=>({...a,...r(e)[`__scope${o}`]}),{});return P.useMemo(()=>({[`__scope${a.scopeName}`]:o}),[o])}};return r.scopeName=a.scopeName,r}var W="rovingFocusGroup.onEntryFocus",X={bubbles:!1,cancelable:!0},J="RovingFocusGroup",[Y,Q,ee]=L(J),[ae,re]=function(a,r=[]){let o=[];const i=()=>{const e=o.map(e=>P.createContext(e));return function(r){const o=(null==r?void 0:r[a])||e;return P.useMemo(()=>({[`__scope${a}`]:{...r,[a]:o}}),[r,o])}};return i.scopeName=a,[function(r,i){const s=P.createContext(i),n=o.length;function t(r){const{scope:o,children:i,...t}=r,l=(null==o?void 0:o[a][n])||s,c=P.useMemo(()=>t,Object.values(t));return e.jsx(l.Provider,{value:c,children:i})}return o=[...o,i],t.displayName=r+"Provider",[t,function(e,o){const t=(null==o?void 0:o[a][n])||s,l=P.useContext(t);if(l)return l;if(void 0!==i)return i;throw new Error(`\`${e}\` must be used within \`${r}\``)}]},K(i,...r)]}(J,[ee]),[oe,ie]=ae(J),se=P.forwardRef((a,r)=>e.jsx(Y.Provider,{scope:a.__scopeRovingFocusGroup,children:e.jsx(Y.Slot,{scope:a.__scopeRovingFocusGroup,children:e.jsx(ne,{...a,ref:r})})}));se.displayName=J;var ne=P.forwardRef((n,t)=>{const{__scopeRovingFocusGroup:l,orientation:c,loop:d=!1,dir:u,currentTabStopId:p,defaultCurrentTabStopId:m,onCurrentTabStopIdChange:g,onEntryFocus:v,preventScrollOnEntryFocus:f=!1,...h}=n,x=P.useRef(null),j=a(t,x),b=I(u),[N=null,y]=r({prop:p,defaultProp:m,onChange:g}),[w,C]=P.useState(!1),_=o(v),S=Q(l),E=P.useRef(!1),[T,M]=P.useState(0);return P.useEffect(()=>{const e=x.current;if(e)return e.addEventListener(W,_),()=>e.removeEventListener(W,_)},[_]),e.jsx(oe,{scope:l,orientation:c,dir:b,loop:d,currentTabStopId:N,onItemFocus:P.useCallback(e=>y(e),[y]),onItemShiftTab:P.useCallback(()=>C(!0),[]),onFocusableItemAdd:P.useCallback(()=>M(e=>e+1),[]),onFocusableItemRemove:P.useCallback(()=>M(e=>e-1),[]),children:e.jsx(i.div,{tabIndex:w||0===T?-1:0,"data-orientation":c,...h,ref:j,style:{outline:"none",...n.style},onMouseDown:s(n.onMouseDown,()=>{E.current=!0}),onFocus:s(n.onFocus,e=>{const a=!E.current;if(e.target===e.currentTarget&&a&&!w){const a=new CustomEvent(W,X);if(e.currentTarget.dispatchEvent(a),!a.defaultPrevented){const e=S().filter(e=>e.focusable);de([e.find(e=>e.active),e.find(e=>e.id===N),...e].filter(Boolean).map(e=>e.ref.current),f)}}E.current=!1}),onBlur:s(n.onBlur,()=>C(!1))})})}),te="RovingFocusGroupItem",le=P.forwardRef((a,r)=>{const{__scopeRovingFocusGroup:o,focusable:t=!0,active:l=!1,tabStopId:c,...d}=a,u=n(),p=c||u,m=ie(te,o),g=m.currentTabStopId===p,v=Q(o),{onFocusableItemAdd:f,onFocusableItemRemove:h}=m;return P.useEffect(()=>{if(t)return f(),()=>h()},[t,f,h]),e.jsx(Y.ItemSlot,{scope:o,id:p,focusable:t,active:l,children:e.jsx(i.span,{tabIndex:g?0:-1,"data-orientation":m.orientation,...d,ref:r,onMouseDown:s(a.onMouseDown,e=>{t?m.onItemFocus(p):e.preventDefault()}),onFocus:s(a.onFocus,()=>m.onItemFocus(p)),onKeyDown:s(a.onKeyDown,e=>{if("Tab"===e.key&&e.shiftKey)return void m.onItemShiftTab();if(e.target!==e.currentTarget)return;const a=function(e,a,r){const o=function(e,a){return"rtl"!==a?e:"ArrowLeft"===e?"ArrowRight":"ArrowRight"===e?"ArrowLeft":e}(e.key,r);return"vertical"===a&&["ArrowLeft","ArrowRight"].includes(o)||"horizontal"===a&&["ArrowUp","ArrowDown"].includes(o)?void 0:ce[o]}(e,m.orientation,m.dir);if(void 0!==a){if(e.metaKey||e.ctrlKey||e.altKey||e.shiftKey)return;e.preventDefault();let i=v().filter(e=>e.focusable).map(e=>e.ref.current);if("last"===a)i.reverse();else if("prev"===a||"next"===a){"prev"===a&&i.reverse();const s=i.indexOf(e.currentTarget);i=m.loop?(o=s+1,(r=i).map((e,a)=>r[(o+a)%r.length])):i.slice(s+1)}setTimeout(()=>de(i))}var r,o})})})});le.displayName=te;var ce={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function de(e,a=!1){const r=document.activeElement;for(const o of e){if(o===r)return;if(o.focus({preventScroll:a}),document.activeElement!==r)return}}var ue=se,pe=le;var me=e=>{const{present:r,children:o}=e,i=function(e){const[a,r]=P.useState(),o=P.useRef({}),i=P.useRef(e),s=P.useRef("none"),n=e?"mounted":"unmounted",[l,c]=function(e,a){return P.useReducer((e,r)=>a[e][r]??e,e)}(n,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return P.useEffect(()=>{const e=ge(o.current);s.current="mounted"===l?e:"none"},[l]),t(()=>{const a=o.current,r=i.current;if(r!==e){const o=s.current,n=ge(a);if(e)c("MOUNT");else if("none"===n||"none"===(null==a?void 0:a.display))c("UNMOUNT");else{c(r&&o!==n?"ANIMATION_OUT":"UNMOUNT")}i.current=e}},[e,c]),t(()=>{if(a){const e=e=>{const r=ge(o.current).includes(e.animationName);e.target===a&&r&&w.flushSync(()=>c("ANIMATION_END"))},r=e=>{e.target===a&&(s.current=ge(o.current))};return a.addEventListener("animationstart",r),a.addEventListener("animationcancel",e),a.addEventListener("animationend",e),()=>{a.removeEventListener("animationstart",r),a.removeEventListener("animationcancel",e),a.removeEventListener("animationend",e)}}c("ANIMATION_END")},[a,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:P.useCallback(e=>{e&&(o.current=getComputedStyle(e)),r(e)},[])}}(r),s="function"==typeof o?o({present:i.isPresent}):P.Children.only(o),n=a(i.ref,function(e){var a,r;let o=null==(a=Object.getOwnPropertyDescriptor(e.props,"ref"))?void 0:a.get,i=o&&"isReactWarning"in o&&o.isReactWarning;if(i)return e.ref;if(o=null==(r=Object.getOwnPropertyDescriptor(e,"ref"))?void 0:r.get,i=o&&"isReactWarning"in o&&o.isReactWarning,i)return e.props.ref;return e.props.ref||e.ref}(s));return"function"==typeof o||i.isPresent?P.cloneElement(s,{ref:n}):null};function ge(e){return(null==e?void 0:e.animationName)||"none"}me.displayName="Presence";var ve="Radio",[fe,he]=H(ve),[xe,je]=fe(ve),be=P.forwardRef((r,o)=>{const{__scopeRadio:n,name:t,checked:l=!1,required:c,disabled:d,value:u="on",onCheck:p,...m}=r,[g,v]=P.useState(null),f=a(o,e=>v(e)),h=P.useRef(!1),x=!g||Boolean(g.closest("form"));return e.jsxs(xe,{scope:n,checked:l,disabled:d,children:[e.jsx(i.button,{type:"button",role:"radio","aria-checked":l,"data-state":we(l),"data-disabled":d?"":void 0,disabled:d,value:u,...m,ref:f,onClick:s(r.onClick,e=>{l||null==p||p(),x&&(h.current=e.isPropagationStopped(),h.current||e.stopPropagation())})}),x&&e.jsx(Pe,{control:g,bubbles:!h.current,name:t,value:u,checked:l,required:c,disabled:d,style:{transform:"translateX(-100%)"}})]})});be.displayName=ve;var Ne="RadioIndicator",ye=P.forwardRef((a,r)=>{const{__scopeRadio:o,forceMount:s,...n}=a,t=je(Ne,o);return e.jsx(me,{present:s||t.checked,children:e.jsx(i.span,{"data-state":we(t.checked),"data-disabled":t.disabled?"":void 0,...n,ref:r})})});ye.displayName=Ne;var Pe=a=>{const{control:r,checked:o,bubbles:i=!0,...s}=a,n=P.useRef(null),t=G(o),c=l(r);return P.useEffect(()=>{const e=n.current,a=window.HTMLInputElement.prototype,r=Object.getOwnPropertyDescriptor(a,"checked").set;if(t!==o&&r){const a=new Event("click",{bubbles:i});r.call(e,o),e.dispatchEvent(a)}},[t,o,i]),e.jsx("input",{type:"radio","aria-hidden":!0,defaultChecked:o,...s,tabIndex:-1,ref:n,style:{...a.style,...c,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function we(e){return e?"checked":"unchecked"}var Ce=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],_e="RadioGroup",[Se,Ee]=H(_e,[re,he]),Te=re(),Me=he(),[Re,Ae]=Se(_e),qe=P.forwardRef((a,o)=>{const{__scopeRadioGroup:s,name:n,defaultValue:t,value:l,required:c=!1,disabled:d=!1,orientation:u,dir:p,loop:m=!0,onValueChange:g,...v}=a,f=Te(s),h=I(p),[x,j]=r({prop:l,defaultProp:t,onChange:g});return e.jsx(Re,{scope:s,name:n,required:c,disabled:d,value:x,onValueChange:j,children:e.jsx(ue,{asChild:!0,...f,orientation:u,dir:h,loop:m,children:e.jsx(i.div,{role:"radiogroup","aria-required":c,"aria-orientation":u,"data-disabled":d?"":void 0,dir:h,...v,ref:o})})})});qe.displayName=_e;var Fe="RadioGroupItem",ke=P.forwardRef((r,o)=>{const{__scopeRadioGroup:i,disabled:n,...t}=r,l=Ae(Fe,i),c=l.disabled||n,d=Te(i),u=Me(i),p=P.useRef(null),m=a(o,p),g=l.value===t.value,v=P.useRef(!1);return P.useEffect(()=>{const e=e=>{Ce.includes(e.key)&&(v.current=!0)},a=()=>v.current=!1;return document.addEventListener("keydown",e),document.addEventListener("keyup",a),()=>{document.removeEventListener("keydown",e),document.removeEventListener("keyup",a)}},[]),e.jsx(pe,{asChild:!0,...d,focusable:!c,active:g,children:e.jsx(be,{disabled:c,required:l.required,checked:g,...u,...t,name:l.name,ref:m,onCheck:()=>l.onValueChange(t.value),onKeyDown:s(e=>{"Enter"===e.key&&e.preventDefault()}),onFocus:s(t.onFocus,()=>{var e;v.current&&(null==(e=p.current)||e.click())})})})});ke.displayName=Fe;var Le=P.forwardRef((a,r)=>{const{__scopeRadioGroup:o,...i}=a,s=Me(o);return e.jsx(ye,{...s,...i,ref:r})});Le.displayName="RadioGroupIndicator";var Ie=qe,Ge=ke,Be=Le;const ze=P.forwardRef(({className:a,...r},o)=>e.jsx(Ie,{className:E("grid gap-2",a),...r,ref:o}));ze.displayName=Ie.displayName;const Oe=P.forwardRef(({className:a,...r},o)=>e.jsx(Ge,{ref:o,className:E("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",a),...r,children:e.jsx(Be,{className:"flex items-center justify-center",children:e.jsx(c,{className:"h-2.5 w-2.5 fill-current text-current"})})}));Oe.displayName=Ge.displayName;const De=P.forwardRef(({icon:a,label:r,required:o=!1,error:i=!1,success:s=!1,className:n="",containerClassName:t="",iconClassName:l="",id:c,...d},u)=>{const p=c||`input-${Math.random().toString(36).substr(2,9)}`;return e.jsxs("div",{className:`input-field-container ${t}`,children:[r&&e.jsx("label",{htmlFor:p,className:"input-field-label "+(o?"required":""),children:r}),e.jsxs("div",{className:"input-field-wrapper",children:[e.jsx("input",{ref:u,id:p,className:(()=>{let e="input-field";return a&&(e+=" input-field-with-icon"),i&&(e+=" error"),s&&(e+=" success"),n&&(e+=` ${n}`),e})(),...d}),a&&e.jsx(a,{className:`input-field-icon ${l}`,size:18})]})]})});De.displayName="InputField";const Ve=({selectedPlan:a="plan_mensual"})=>{var r;const{toast:o}=B(),[i,s]=P.useState({email:"",password:"",confirmPassword:"",nombre:"",apellidos:"",edad:0,numero_telefono:"",codigo_postal:"",provincia:"",municipio:"",company:"",categoria:"",direccion:"",plan:a,paymentMethod:"stripe"}),[n,t]=P.useState(""),{register:l,loading:c}=k(),b=C(),N=(e,a)=>{s(r=>{const o={...r,[e]:a};return"provincia"===e&&(o.municipio=""),o})};return e.jsxs("div",{className:"registro-form",children:[n&&e.jsx("div",{className:"registro-error",children:n}),e.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),t(""),!(i.email&&i.password&&i.nombre&&i.apellidos&&i.numero_telefono&&i.codigo_postal&&i.categoria&&i.provincia&&i.municipio&&i.direccion))return void t("Por favor, completa todos los campos obligatorios");if(i.password!==i.confirmPassword)return void t("Las contraseñas no coinciden");if(i.password.length<6)return void t("La contraseña debe tener al menos 6 caracteres");if(i.edad<=0||i.edad>120)return void t("Por favor, introduce una edad válida (1-120)");if(!/^[0-9+\-\s()]{9,15}$/.test(i.numero_telefono))return void t("Por favor, introduce un número de teléfono válido");if(/^[0-9]{5}$/.test(i.codigo_postal))try{const e="https://api.netpro.com/v1/register/especialista",a={data:{email:i.email,password:i.password,confirmPassword:i.confirmPassword,nombre:i.nombre,apellidos:i.apellidos,edad:i.edad,numero_telefono:i.numero_telefono,codigo_postal:i.codigo_postal,provincia:i.provincia,municipio:i.municipio,company:i.company,categoria:i.categoria,direccion:i.direccion,plan:i.plan,paymentMethod:i.paymentMethod}},r=await fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(r.ok){await r.json();"otros"===i.categoria&&o({title:"Registro exitoso",description:"Por favor, ponte en contacto con nosotros para crear tu categoría personalizada.",duration:5e3}),"stripe"===i.paymentMethod?alert("Redirigiendo a Stripe para completar el pago..."):alert("Redirigiendo a GoCardless para domiciliación bancaria..."),b("/calendario")}else{const e=await r.json();t(e.message||"Error al crear la cuenta. Por favor, inténtalo de nuevo.")}}catch(a){t("Error al registrarse. Por favor, inténtalo más tarde.")}else t("Por favor, introduce un código postal válido (5 dígitos)")},className:"registro-form",children:[e.jsxs("div",{className:"registro-section",children:[e.jsx("h3",{className:"registro-section-title",children:"Información Personal"}),e.jsxs("div",{className:"registro-field-group",children:[e.jsx(De,{id:"nombre",type:"text",label:"Nombre",placeholder:"Tu nombre",value:i.nombre,onChange:e=>N("nombre",e.target.value),icon:d,required:!0}),e.jsx(De,{id:"apellidos",type:"text",label:"Apellidos",placeholder:"Tus apellidos",value:i.apellidos,onChange:e=>N("apellidos",e.target.value),icon:d,required:!0})]}),e.jsxs("div",{className:"registro-field-group",children:[e.jsx(De,{id:"edad",type:"number",label:"Edad",placeholder:"Tu edad",value:i.edad||"",onChange:e=>N("edad",parseInt(e.target.value)||0),icon:u,min:"1",max:"120",required:!0}),e.jsx(De,{id:"numero_telefono",type:"tel",label:"Número de teléfono",placeholder:"+34 123 456 789",value:i.numero_telefono,onChange:e=>N("numero_telefono",e.target.value),icon:p,required:!0})]}),e.jsx(De,{id:"company",type:"text",label:"Empresa (opcional)",placeholder:"Nombre de tu empresa",value:i.company,onChange:e=>N("company",e.target.value),icon:m}),e.jsx(De,{id:"email",type:"email",label:"Email",placeholder:"tu@email.com",value:i.email,onChange:e=>N("email",e.target.value),icon:g,required:!0}),e.jsxs("div",{className:"registro-field-group",children:[e.jsx(De,{id:"password",type:"password",label:"Contraseña",placeholder:"••••••••",value:i.password,onChange:e=>N("password",e.target.value),icon:v,required:!0}),e.jsx(De,{id:"confirmPassword",type:"password",label:"Confirmar contraseña",placeholder:"••••••••",value:i.confirmPassword,onChange:e=>N("confirmPassword",e.target.value),icon:v,required:!0})]})]}),e.jsxs("div",{className:"registro-section",children:[e.jsx("h3",{className:"registro-section-title",children:"Información Profesional y Ubicación"}),e.jsxs("div",{className:"registro-field",children:[e.jsx(z,{htmlFor:"categoria",className:"registro-label registro-label-required",children:"Categoría Profesional"}),e.jsxs(O,{value:i.categoria,onValueChange:e=>N("categoria",e),children:[e.jsx(D,{className:"registro-select",children:e.jsx(V,{placeholder:"Selecciona tu categoría profesional"})}),e.jsx($,{children:["Abogacía","Arquitectura","Cerrajería","Consultoría","Contabilidad","Fontanería","Marketing","Pintura","Traducción","otros"].map(a=>e.jsx(U,{value:a,children:"otros"===a?"Otros (contacta para crear nueva categoría)":a},a))})]})]}),e.jsxs("div",{className:"registro-field-group",children:[e.jsx(De,{id:"direccion",type:"text",label:"Dirección",placeholder:"Calle, número, piso...",value:i.direccion,onChange:e=>N("direccion",e.target.value),icon:f,required:!0}),e.jsx(De,{id:"codigo_postal",type:"text",label:"Código postal",placeholder:"28001",value:i.codigo_postal,onChange:e=>N("codigo_postal",e.target.value),icon:h,maxLength:5,required:!0})]}),e.jsxs("div",{className:"registro-field-group",children:[e.jsxs("div",{className:"registro-field",children:[e.jsx(z,{htmlFor:"provincia",className:"registro-label registro-label-required",children:"Provincia"}),e.jsxs(O,{value:i.provincia,onValueChange:e=>N("provincia",e),children:[e.jsx(D,{className:"registro-select",children:e.jsx(V,{placeholder:"Selecciona tu provincia"})}),e.jsx($,{children:["Madrid","Barcelona","Valencia","Sevilla","Bilbao","Málaga","Zaragoza"].map(a=>e.jsx(U,{value:a,children:a},a))})]})]}),e.jsxs("div",{className:"registro-field",children:[e.jsx(z,{htmlFor:"municipio",className:"registro-label registro-label-required",children:"Municipio"}),e.jsxs(O,{value:i.municipio,onValueChange:e=>N("municipio",e),disabled:!i.provincia,children:[e.jsx(D,{className:"registro-select",children:e.jsx(V,{placeholder:i.provincia?"Selecciona tu municipio":"Primero selecciona provincia"})}),e.jsx($,{children:i.provincia&&(null==(r={Madrid:["Madrid","Alcobendas","Torrejón de Ardoz","Móstoles","Las Rozas","Getafe"],Barcelona:["Barcelona","L'Hospitalet de Llobregat","Sabadell","Terrassa","Badalona"],Valencia:["Valencia","Gandia","Sagunto","Alzira","Xàtiva"],Sevilla:["Sevilla","Dos Hermanas","Alcalá de Guadaíra","Utrera","Mairena del Aljarafe"],Bilbao:["Bilbao","Getxo","Barakaldo","Santurtzi","Portugalete"],"Málaga":["Málaga","Marbella","Fuengirola","Torremolinos","Benalmádena"],Zaragoza:["Zaragoza","Calatayud","Ejea de los Caballeros","Tarazona","Caspe"]}[i.provincia])?void 0:r.map(a=>e.jsx(U,{value:a,children:a},a)))})]})]})]})]}),e.jsxs("div",{className:"registro-section",children:[e.jsx("h3",{className:"registro-section-title",children:"Plan de Suscripción"}),e.jsx(ze,{value:i.plan,onValueChange:e=>N("plan",e),className:"registro-plans",children:Object.entries({plan_mensual:{name:"Plan Mensual",price:"50€/mes"},plan_trimestral:{name:"Plan Trimestral",price:"138€ (3 meses)"},plan_anual:{name:"Plan Anual",price:"540€ (12 meses)"}}).map(([a,r])=>e.jsxs("div",{className:"registro-plan-option "+(i.plan===a?"selected":""),children:[e.jsx(Oe,{value:a,id:a}),e.jsxs(z,{htmlFor:a,className:"registro-plan-content",children:[e.jsx("span",{className:"registro-plan-name",children:r.name}),e.jsx("span",{className:"registro-plan-price",children:r.price})]})]},a))})]}),e.jsxs("div",{className:"registro-section",children:[e.jsx("h3",{className:"registro-section-title",children:"Método de Pago"}),e.jsxs(ze,{value:i.paymentMethod,onValueChange:e=>N("paymentMethod",e),className:"registro-payment-methods",children:[e.jsxs("div",{className:"registro-payment-option "+("stripe"===i.paymentMethod?"selected":""),children:[e.jsx(Oe,{value:"stripe",id:"stripe"}),e.jsxs(z,{htmlFor:"stripe",className:"registro-payment-info",children:[e.jsx(x,{className:"registro-payment-icon",style:{color:"#3b82f6"}}),e.jsxs("div",{className:"registro-payment-details",children:[e.jsx("div",{className:"registro-payment-name",children:"Tarjeta de Crédito/Débito"}),e.jsx("div",{className:"registro-payment-description",children:"Pago seguro con Stripe"})]})]})]}),e.jsxs("div",{className:"registro-payment-option "+("gocardless"===i.paymentMethod?"selected":""),children:[e.jsx(Oe,{value:"gocardless",id:"gocardless"}),e.jsxs(z,{htmlFor:"gocardless",className:"registro-payment-info",children:[e.jsx(m,{className:"registro-payment-icon",style:{color:"#10b981"}}),e.jsxs("div",{className:"registro-payment-details",children:[e.jsx("div",{className:"registro-payment-name",children:"Domiciliación Bancaria"}),e.jsx("div",{className:"registro-payment-description",children:"Pago automático con GoCardless"})]})]})]})]})]}),e.jsx(T,{type:"submit",className:"registro-submit-btn",disabled:c,children:c?e.jsxs(e.Fragment,{children:[e.jsx(j,{className:"w-4 h-4 animate-spin"}),"Procesando registro..."]}):e.jsx(e.Fragment,{children:"Crear Cuenta y Proceder al Pago"})})]})]})},$e=({selectedPlan:a="plan_mensual"})=>{var r;const{toast:o}=B(),[i,s]=P.useState({email:"",password:"",confirmPassword:"",nombre:"",apellidos:"",edad:0,numero_telefono:"",codigo_postal:"",provincia:"",municipio:"",tipoPropiedad:"",direccionPropiedad:""}),[n,t]=P.useState(""),{register:l,loading:c}=k(),m=C(),x=(e,a)=>{s(r=>{const o={...r,[e]:a};return"provincia"===e&&(o.municipio=""),o})};return e.jsxs("div",{className:"registro-form",children:[n&&e.jsx("div",{className:"registro-error",children:n}),e.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),t(""),!(i.email&&i.password&&i.nombre&&i.apellidos&&i.numero_telefono&&i.codigo_postal&&i.tipoPropiedad&&i.direccionPropiedad&&i.provincia&&i.municipio))return void t("Por favor, completa todos los campos obligatorios");if(i.password!==i.confirmPassword)return void t("Las contraseñas no coinciden");if(i.password.length<6)return void t("La contraseña debe tener al menos 6 caracteres");if(i.edad<=0||i.edad>120)return void t("Por favor, introduce una edad válida (1-120)");if(!/^[0-9+\-\s()]{9,15}$/.test(i.numero_telefono))return void t("Por favor, introduce un número de teléfono válido");if(/^[0-9]{5}$/.test(i.codigo_postal))try{const e="https://api.netpro.com/v1/register/propietario",a={data:{email:i.email,password:i.password,confirmPassword:i.confirmPassword,nombre:i.nombre,apellidos:i.apellidos,edad:i.edad,numero_telefono:i.numero_telefono,codigo_postal:i.codigo_postal,provincia:i.provincia,municipio:i.municipio,tipoPropiedad:i.tipoPropiedad,direccionPropiedad:i.direccionPropiedad}},r=await fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(r.ok){await r.json();o({title:"Registro exitoso",description:"Tu cuenta de propietario ha sido creada exitosamente.",duration:5e3}),m("/calendario")}else{const e=await r.json();t(e.message||"Error al crear la cuenta. Por favor, inténtalo de nuevo.")}}catch(a){t("Error al registrarse. Por favor, inténtalo más tarde.")}else t("Por favor, introduce un código postal válido (5 dígitos)")},className:"registro-form",children:[e.jsxs("div",{className:"registro-section",children:[e.jsx("h3",{className:"registro-section-title",children:"Información Personal"}),e.jsxs("div",{className:"registro-field-group",children:[e.jsx(De,{id:"nombre",type:"text",label:"Nombre",placeholder:"Tu nombre",value:i.nombre,onChange:e=>x("nombre",e.target.value),icon:d,required:!0}),e.jsx(De,{id:"apellidos",type:"text",label:"Apellidos",placeholder:"Tus apellidos",value:i.apellidos,onChange:e=>x("apellidos",e.target.value),icon:d,required:!0})]}),e.jsxs("div",{className:"registro-field-group",children:[e.jsx(De,{id:"edad",type:"number",label:"Edad",placeholder:"Tu edad",value:i.edad||"",onChange:e=>x("edad",parseInt(e.target.value)||0),icon:u,min:"1",max:"120",required:!0}),e.jsx(De,{id:"numero_telefono",type:"tel",label:"Número de teléfono",placeholder:"+34 123 456 789",value:i.numero_telefono,onChange:e=>x("numero_telefono",e.target.value),icon:p,required:!0})]}),e.jsx(De,{id:"email",type:"email",label:"Email",placeholder:"tu@email.com",value:i.email,onChange:e=>x("email",e.target.value),icon:g,required:!0}),e.jsxs("div",{className:"registro-field-group",children:[e.jsx(De,{id:"password",type:"password",label:"Contraseña",placeholder:"••••••••",value:i.password,onChange:e=>x("password",e.target.value),icon:v,required:!0}),e.jsx(De,{id:"confirmPassword",type:"password",label:"Confirmar contraseña",placeholder:"••••••••",value:i.confirmPassword,onChange:e=>x("confirmPassword",e.target.value),icon:v,required:!0})]})]}),e.jsxs("div",{className:"registro-section",children:[e.jsx("h3",{className:"registro-section-title",children:"Información de la Propiedad"}),e.jsxs("div",{className:"registro-field",children:[e.jsx(z,{htmlFor:"tipoPropiedad",className:"registro-label registro-label-required",children:"Tipo de Propiedad"}),e.jsxs(O,{value:i.tipoPropiedad,onValueChange:e=>x("tipoPropiedad",e),children:[e.jsx(D,{className:"registro-select",children:e.jsx(V,{placeholder:"Selecciona el tipo de propiedad"})}),e.jsx($,{children:["Piso","Casa unifamiliar","Chalet","Dúplex","Ático","Local comercial","Oficina","Nave industrial","Garaje","Trastero","Terreno/Solar"].map(a=>e.jsx(U,{value:a,children:a},a))})]})]}),e.jsxs("div",{className:"registro-field-group",children:[e.jsx(De,{id:"direccionPropiedad",type:"text",label:"Dirección de la Propiedad",placeholder:"Calle, número, piso...",value:i.direccionPropiedad,onChange:e=>x("direccionPropiedad",e.target.value),icon:f,required:!0}),e.jsx(De,{id:"codigo_postal",type:"text",label:"Código postal",placeholder:"28001",value:i.codigo_postal,onChange:e=>x("codigo_postal",e.target.value),icon:h,maxLength:5,required:!0})]}),e.jsxs("div",{className:"registro-field-group",children:[e.jsxs("div",{className:"registro-field",children:[e.jsx(z,{htmlFor:"provincia",className:"registro-label registro-label-required",children:"Provincia"}),e.jsxs(O,{value:i.provincia,onValueChange:e=>x("provincia",e),children:[e.jsx(D,{className:"registro-select",children:e.jsx(V,{placeholder:"Selecciona la provincia"})}),e.jsx($,{children:["Madrid","Barcelona","Valencia","Sevilla","Bilbao","Málaga","Zaragoza"].map(a=>e.jsx(U,{value:a,children:a},a))})]})]}),e.jsxs("div",{className:"registro-field",children:[e.jsx(z,{htmlFor:"municipio",className:"registro-label registro-label-required",children:"Municipio"}),e.jsxs(O,{value:i.municipio,onValueChange:e=>x("municipio",e),disabled:!i.provincia,children:[e.jsx(D,{className:"registro-select",children:e.jsx(V,{placeholder:i.provincia?"Selecciona el municipio":"Primero selecciona provincia"})}),e.jsx($,{children:i.provincia&&(null==(r={Madrid:["Madrid","Alcobendas","Torrejón de Ardoz","Móstoles","Las Rozas","Getafe"],Barcelona:["Barcelona","L'Hospitalet de Llobregat","Sabadell","Terrassa","Badalona"],Valencia:["Valencia","Gandia","Sagunto","Alzira","Xàtiva"],Sevilla:["Sevilla","Dos Hermanas","Alcalá de Guadaíra","Utrera","Mairena del Aljarafe"],Bilbao:["Bilbao","Getxo","Barakaldo","Santurtzi","Portugalete"],"Málaga":["Málaga","Marbella","Fuengirola","Torremolinos","Benalmádena"],Zaragoza:["Zaragoza","Calatayud","Ejea de los Caballeros","Tarazona","Caspe"]}[i.provincia])?void 0:r.map(a=>e.jsx(U,{value:a,children:a},a)))})]})]})]})]}),e.jsx(T,{type:"submit",className:"registro-submit-btn",disabled:c,children:c?e.jsxs(e.Fragment,{children:[e.jsx(j,{className:"w-4 h-4 animate-spin"}),"Procesando registro..."]}):e.jsx(e.Fragment,{children:"Crear Cuenta"})})]})]})},Ue=({selectedPlan:a="plan_mensual"})=>{var r;const{toast:o}=B(),[i,s]=P.useState({email:"",password:"",confirmPassword:"",name:"",empresaAdministradora:"",numeroLicencia:"",comunidadesGestionadas:0,provincia:"",municipio:"",telefonoEmpresa:"",plan:a,paymentMethod:"stripe"}),[n,t]=P.useState(""),{register:l,loading:c}=k(),f=C(),x=(e,a)=>{s(r=>{const o={...r,[e]:a};return"provincia"===e&&(o.municipio=""),o})};return e.jsxs("div",{className:"registro-form",children:[n&&e.jsx("div",{className:"registro-error",children:n}),e.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),t(""),!(i.email&&i.password&&i.nombre&&i.apellidos&&i.numero_telefono&&i.codigo_postal&&i.empresaAdministradora&&i.numeroLicencia&&i.provincia&&i.municipio&&i.telefonoEmpresa))return void t("Por favor, completa todos los campos obligatorios");if(i.password!==i.confirmPassword)return void t("Las contraseñas no coinciden");if(i.password.length<6)return void t("La contraseña debe tener al menos 6 caracteres");if(i.edad<=0||i.edad>120)return void t("Por favor, introduce una edad válida (1-120)");const a=/^[0-9+\-\s()]{9,15}$/;if(!a.test(i.numero_telefono))return void t("Por favor, introduce un número de teléfono personal válido");if(!a.test(i.telefonoEmpresa))return void t("Por favor, introduce un número de teléfono de empresa válido");if(/^[0-9]{5}$/.test(i.codigo_postal))if(i.numeroLicencia.length<5)t("El número de licencia debe tener al menos 5 caracteres");else if(i.comunidadesGestionadas<0)t("El número de comunidades gestionadas no puede ser negativo");else try{const e="https://api.netpro.com/v1/register/administrador",a={data:{email:i.email,password:i.password,confirmPassword:i.confirmPassword,nombre:i.nombre,apellidos:i.apellidos,edad:i.edad,numero_telefono:i.numero_telefono,codigo_postal:i.codigo_postal,provincia:i.provincia,municipio:i.municipio,empresaAdministradora:i.empresaAdministradora,numeroLicencia:i.numeroLicencia,comunidadesGestionadas:i.comunidadesGestionadas,telefonoEmpresa:i.telefonoEmpresa}},r=await fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(r.ok){await r.json();o({title:"Registro exitoso",description:"Tu cuenta de administrador de fincas ha sido creada exitosamente. Pendiente de verificación de licencia.",duration:5e3}),f("/calendario")}else{const e=await r.json();t(e.message||"Error al crear la cuenta. Por favor, inténtalo de nuevo.")}}catch(r){t("Error al registrarse. Por favor, inténtalo más tarde.")}else t("Por favor, introduce un código postal válido (5 dígitos)")},className:"registro-form",children:[e.jsxs("div",{className:"registro-section",children:[e.jsx("h3",{className:"registro-section-title",children:"Información Personal"}),e.jsxs("div",{className:"registro-field-group",children:[e.jsx(De,{id:"nombre",type:"text",label:"Nombre",placeholder:"Tu nombre",value:i.nombre,onChange:e=>x("nombre",e.target.value),icon:d,required:!0}),e.jsx(De,{id:"apellidos",type:"text",label:"Apellidos",placeholder:"Tus apellidos",value:i.apellidos,onChange:e=>x("apellidos",e.target.value),icon:d,required:!0})]}),e.jsxs("div",{className:"registro-field-group",children:[e.jsx(De,{id:"edad",type:"number",label:"Edad",placeholder:"Tu edad",value:i.edad||"",onChange:e=>x("edad",parseInt(e.target.value)||0),icon:u,min:"1",max:"120",required:!0}),e.jsx(De,{id:"numero_telefono",type:"tel",label:"Número de teléfono personal",placeholder:"+34 123 456 789",value:i.numero_telefono,onChange:e=>x("numero_telefono",e.target.value),icon:p,required:!0})]}),e.jsx(De,{id:"email",type:"email",label:"Email",placeholder:"tu@email.com",value:i.email,onChange:e=>x("email",e.target.value),icon:g,required:!0}),e.jsxs("div",{className:"registro-field-group",children:[e.jsx(De,{id:"password",type:"password",label:"Contraseña",placeholder:"••••••••",value:i.password,onChange:e=>x("password",e.target.value),icon:v,required:!0}),e.jsx(De,{id:"confirmPassword",type:"password",label:"Confirmar contraseña",placeholder:"••••••••",value:i.confirmPassword,onChange:e=>x("confirmPassword",e.target.value),icon:v,required:!0})]})]}),e.jsxs("div",{className:"registro-section",children:[e.jsx("h3",{className:"registro-section-title",children:"Información Profesional"}),e.jsx(De,{id:"empresaAdministradora",type:"text",label:"Empresa Administradora",placeholder:"Nombre de la empresa administradora",value:i.empresaAdministradora,onChange:e=>x("empresaAdministradora",e.target.value),icon:m,required:!0}),e.jsxs("div",{className:"registro-field-group",children:[e.jsx(De,{id:"numeroLicencia",type:"text",label:"Número de Licencia",placeholder:"Número de licencia profesional",value:i.numeroLicencia,onChange:e=>x("numeroLicencia",e.target.value),icon:b,required:!0}),e.jsx(De,{id:"comunidadesGestionadas",type:"number",label:"Comunidades Gestionadas",placeholder:"Número de comunidades",value:i.comunidadesGestionadas||"",onChange:e=>x("comunidadesGestionadas",parseInt(e.target.value)||0),icon:h,min:"0"})]}),e.jsx(De,{id:"telefonoEmpresa",type:"tel",label:"Teléfono de la Empresa",placeholder:"+34 123 456 789",value:i.telefonoEmpresa,onChange:e=>x("telefonoEmpresa",e.target.value),icon:p,required:!0})]}),e.jsxs("div",{className:"registro-section",children:[e.jsx("h3",{className:"registro-section-title",children:"Ubicación de la Empresa"}),e.jsx(De,{id:"codigo_postal",type:"text",label:"Código postal de la empresa",placeholder:"28001",value:i.codigo_postal,onChange:e=>x("codigo_postal",e.target.value),icon:h,maxLength:5,required:!0}),e.jsxs("div",{className:"registro-field-group",children:[e.jsxs("div",{className:"registro-field",children:[e.jsx(z,{htmlFor:"provincia",className:"registro-label registro-label-required",children:"Provincia"}),e.jsxs(O,{value:i.provincia,onValueChange:e=>x("provincia",e),children:[e.jsx(D,{className:"registro-select",children:e.jsx(V,{placeholder:"Selecciona la provincia"})}),e.jsx($,{children:["Madrid","Barcelona","Valencia","Sevilla","Bilbao","Málaga","Zaragoza"].map(a=>e.jsx(U,{value:a,children:a},a))})]})]}),e.jsxs("div",{className:"registro-field",children:[e.jsx(z,{htmlFor:"municipio",className:"registro-label registro-label-required",children:"Municipio"}),e.jsxs(O,{value:i.municipio,onValueChange:e=>x("municipio",e),disabled:!i.provincia,children:[e.jsx(D,{className:"registro-select",children:e.jsx(V,{placeholder:i.provincia?"Selecciona el municipio":"Primero selecciona provincia"})}),e.jsx($,{children:i.provincia&&(null==(r={Madrid:["Madrid","Alcobendas","Torrejón de Ardoz","Móstoles","Las Rozas","Getafe"],Barcelona:["Barcelona","L'Hospitalet de Llobregat","Sabadell","Terrassa","Badalona"],Valencia:["Valencia","Gandia","Sagunto","Alzira","Xàtiva"],Sevilla:["Sevilla","Dos Hermanas","Alcalá de Guadaíra","Utrera","Mairena del Aljarafe"],Bilbao:["Bilbao","Getxo","Barakaldo","Santurtzi","Portugalete"],"Málaga":["Málaga","Marbella","Fuengirola","Torremolinos","Benalmádena"],Zaragoza:["Zaragoza","Calatayud","Ejea de los Caballeros","Tarazona","Caspe"]}[i.provincia])?void 0:r.map(a=>e.jsx(U,{value:a,children:a},a)))})]})]})]})]}),e.jsx(T,{type:"submit",className:"registro-submit-btn",disabled:c,children:c?e.jsxs(e.Fragment,{children:[e.jsx(j,{className:"w-4 h-4 animate-spin"}),"Procesando registro..."]}):e.jsx(e.Fragment,{children:"Crear Cuenta"})})]})]})},He=()=>{var a,r;const o=(null==(a=_().state)?void 0:a.selectedPlan)||"plan_mensual",[i,s]=P.useState(null),{user:n,loading:t}=k(),l=C();if(P.useEffect(()=>{!t&&n&&l("/calendario",{replace:!0})},[n,t,l]),t)return e.jsx("div",{className:"registro-loading",children:e.jsxs("div",{className:"registro-loading-content",children:[e.jsx("div",{className:"registro-spinner"}),e.jsx("p",{className:"registro-loading-text",children:"Verificando sesión..."})]})});const c=[{id:"especialista",title:"Registro de Especialista",description:"Para profesionales independientes que ofrecen servicios especializados",icon:d,features:["Perfil profesional completo","Gestión de servicios","Networking con otros profesionales","Sistema de citas y calendario"]},{id:"propietarios",title:"Registro de Propietarios",description:"Para propietarios de inmuebles que buscan profesionales y administradores",icon:N,features:["Gestión de propiedades","Búsqueda de profesionales","Solicitud de presupuestos","Historial de servicios"]},{id:"administradores",title:"Registro de Administradores de Fincas",description:"Para administradores profesionales de comunidades de propietarios",icon:y,features:["Gestión de comunidades","Panel de administración avanzado","Comunicación con propietarios","Reportes y contabilidad"]}];return e.jsx("div",{className:"registro-container",children:e.jsxs("div",{className:"registro-content",children:[e.jsxs("div",{className:"registro-header",children:[e.jsxs("div",{className:"registro-brand",children:[e.jsx("div",{className:"registro-brand-icon",children:e.jsx("span",{children:"NP"})}),e.jsx("span",{className:"registro-brand-text",children:"NetPro"})]}),e.jsx("h1",{className:"registro-title",children:"Únete a NetPro"}),e.jsx("p",{className:"registro-subtitle",children:i?`Completa tu registro como ${null==(r=c.find(e=>e.id===i))?void 0:r.title.replace("Registro de ","")}`:"Selecciona el tipo de cuenta que mejor se adapte a tus necesidades"})]}),e.jsxs(M,{className:"registro-card",children:[e.jsxs(R,{className:"registro-card-header",children:[e.jsx(A,{className:"registro-card-title",children:i?"Formulario de Registro":"Tipo de Registro"}),e.jsx(q,{className:"registro-card-description",children:i?"Completa todos los campos para crear tu cuenta":"Elige la opción que mejor describa tu perfil"})]}),e.jsx(F,{className:"registro-card-content",children:i?e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{marginBottom:"1.5rem"},children:e.jsx("button",{onClick:()=>{s(null)},style:{background:"none",border:"none",color:"#3b82f6",cursor:"pointer",fontSize:"0.875rem",display:"flex",alignItems:"center",gap:"0.25rem"},children:"← Volver a selección de tipo"})}),(()=>{switch(i){case"especialista":return e.jsx(Ve,{selectedPlan:o});case"propietarios":return e.jsx($e,{selectedPlan:o});case"administradores":return e.jsx(Ue,{selectedPlan:o});default:return null}})(),e.jsxs("div",{className:"registro-footer",children:[e.jsxs("p",{className:"registro-footer-text",children:["¿Ya tienes cuenta?"," ",e.jsx(S,{to:"/iniciar-sesion",className:"registro-footer-link",children:"Inicia sesión aquí"})]}),e.jsxs("p",{className:"registro-footer-terms",children:["Al crear una cuenta, aceptas nuestros"," ",e.jsx("button",{className:"registro-footer-terms button",children:"Términos de Servicio"})," ","y"," ",e.jsx("button",{className:"registro-footer-terms button",children:"Política de Privacidad"})]})]})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"registro-type-selector",children:c.map(a=>{const r=a.icon;return e.jsxs("div",{className:"registro-type-card",onClick:()=>(e=>{s(e)})(a.id),children:[e.jsx("div",{className:"registro-type-icon",children:e.jsx(r,{size:24})}),e.jsx("h3",{className:"registro-type-title",children:a.title}),e.jsx("p",{className:"registro-type-description",children:a.description}),e.jsx("ul",{style:{marginTop:"1rem",paddingLeft:"1rem",fontSize:"0.75rem",color:"#6b7280",listStyle:"disc"},children:a.features.map((a,r)=>e.jsx("li",{children:a},r))})]},a.id)})}),e.jsxs("div",{className:"registro-footer",children:[e.jsxs("p",{className:"registro-footer-text",children:["¿Ya tienes cuenta?"," ",e.jsx(S,{to:"/iniciar-sesion",className:"registro-footer-link",children:"Inicia sesión aquí"})]}),e.jsxs("p",{className:"registro-footer-terms",children:["Al crear una cuenta, aceptas nuestros"," ",e.jsx("button",{className:"registro-footer-terms button",children:"Términos de Servicio"})," ","y"," ",e.jsx("button",{className:"registro-footer-terms button",children:"Política de Privacidad"})]})]})]})})]})]})})};export{He as default};
