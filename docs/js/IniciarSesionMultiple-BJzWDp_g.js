import{j as e,a5 as s,av as i,am as a}from"./chunk-4zK531Ye.js";import{r as o,u as n,d as r,L as t}from"./chunk-CntFpdkq.js";import{B as l,C as c,a as d,b as p,g as m,c as u}from"./chunk-DSSkY553.js";import{A as g,a as h,L as x,I as j}from"./chunk-gYniKtCL.js";import{a as f,u as N}from"./chunk-BqkP3x14.js";const v=({config:n,onSubmit:r,loading:t=!1,className:c=""})=>{const[d,p]=o.useState(""),[m,u]=o.useState(""),[f,N]=o.useState("");return e.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),N(""),d&&m)try{await r({email:d,password:m},n.endpoint)||N("Credenciales incorrectas. Por favor, intÃ©ntalo de nuevo.")}catch(s){N("Error al iniciar sesiÃ³n. Por favor, intÃ©ntalo mÃ¡s tarde.")}else N("Por favor, completa todos los campos")},className:`login-form ${c}`,children:[f&&e.jsx(g,{className:"login-error-alert",children:e.jsx(h,{className:"login-error-text",children:f})}),e.jsxs("div",{className:"login-field-group",children:[e.jsx(x,{htmlFor:`email-${n.userType}`,className:"login-label",children:"Email"}),e.jsxs("div",{className:"login-input-wrapper",children:[e.jsx(s,{className:"login-input-icon"}),e.jsx(j,{id:`email-${n.userType}`,type:"email",placeholder:"tu@email.com",value:d,onChange:e=>p(e.target.value),className:"login-input login-input-with-icon",required:!0})]})]}),e.jsxs("div",{className:"login-field-group",children:[e.jsx(x,{htmlFor:`password-${n.userType}`,className:"login-label",children:"ContraseÃ±a"}),e.jsxs("div",{className:"login-input-wrapper",children:[e.jsx(i,{className:"login-input-icon"}),e.jsx(j,{id:`password-${n.userType}`,type:"password",placeholder:"â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢",value:m,onChange:e=>u(e.target.value),className:"login-input login-input-with-icon",required:!0})]})]}),e.jsx(l,{type:"submit",className:`login-submit-btn login-submit-btn-${n.userType}`,disabled:t,style:{background:`linear-gradient(135deg, ${n.gradientColors.from}, ${n.gradientColors.to})`},children:t?e.jsxs(e.Fragment,{children:[e.jsx(a,{className:"w-4 h-4 animate-spin"}),"Iniciando sesiÃ³n..."]}):e.jsx(e.Fragment,{children:n.buttonText})})]})},b=({config:s,onSuccess:i,onError:a,className:o=""})=>{const{loginWithUserType:n,loading:r}=f();return e.jsxs(c,{className:`specialized-login-card specialized-login-card-${s.userType} ${o}`,children:[e.jsxs(d,{className:"specialized-login-header",children:[e.jsx("div",{className:"specialized-login-icon",children:s.icon}),e.jsx(p,{className:"specialized-login-title",children:s.title}),e.jsx(m,{className:"specialized-login-description",children:s.description})]}),e.jsx(u,{className:"specialized-login-content",children:e.jsx(v,{config:s,onSubmit:async(e,o)=>{try{const r=await n(e,s.userType,o);return r&&i?i():!r&&a&&a("Error al iniciar sesiÃ³n"),r}catch(r){const e=r instanceof Error?r.message:"Error desconocido";return a&&a(e),!1}},loading:r,className:`specialized-login-form-${s.userType}`})})]})};class y{static getEndpoint(e){const s={especialista:"https://api.netpro.com/v1/login/especialista",propietario:"https://api.netpro.com/v1/login/propietario",administrador:"https://api.netpro.com/v1/login/administrador"}[e];if(!s)throw new Error(`Endpoint de login no configurado para tipo de usuario: ${e}`);return s}static createConfig(e){const s=this.getEndpoint(e);return{...{especialista:{userType:"especialista",title:"Especialistas",description:"Acceso para profesionales y proveedores de servicios",icon:"ðŸ”§",buttonText:"Iniciar SesiÃ³n como Especialista",gradientColors:{from:"#2563eb",to:"#1d4ed8"}},propietario:{userType:"propietario",title:"Propietarios",description:"Acceso para propietarios de inmuebles",icon:"ðŸ ",buttonText:"Iniciar SesiÃ³n como Propietario",gradientColors:{from:"#059669",to:"#047857"}},administrador:{userType:"administrador",title:"Administradores",description:"Acceso para administradores de fincas",icon:"ðŸ¢",buttonText:"Iniciar SesiÃ³n como Administrador",gradientColors:{from:"#ea580c",to:"#dc2626"}}}[e],endpoint:s}}static getAllConfigs(){return["especialista","propietario","administrador"].map(e=>this.createConfig(e))}}const T=()=>{var s,i;const{user:a,loading:l}=N(),c=n(),d=(null==(i=null==(s=r().state)?void 0:s.from)?void 0:i.pathname)||"/calendario";if(o.useEffect(()=>{!l&&a&&c(d,{replace:!0})},[a,l,c,d]),l)return e.jsx("div",{className:"login-options-container",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600",children:"Verificando sesiÃ³n..."})]})});const p=y.getAllConfigs(),m=()=>{},u=e=>{};return e.jsx("div",{className:"login-options-container",children:e.jsxs("div",{className:"login-options-content",children:[e.jsxs("div",{className:"login-options-header",children:[e.jsxs("div",{className:"login-options-brand",children:[e.jsx("div",{className:"login-options-brand-icon",children:"NP"}),e.jsx("span",{className:"login-options-brand-text",children:"NetPro"})]}),e.jsx("h1",{className:"login-options-title",children:"Elige tu tipo de acceso"}),e.jsx("p",{className:"login-options-subtitle",children:"Selecciona la opciÃ³n que corresponde a tu perfil para acceder a tu Ã¡rea privada"})]}),e.jsx("div",{className:"login-options-grid",children:p.map(s=>e.jsx(b,{config:s,onSuccess:m,onError:u},s.userType))}),e.jsxs("div",{className:"login-options-footer",children:[e.jsxs("p",{className:"login-options-footer-text",children:["Â¿No tienes cuenta?"," ",e.jsx(t,{to:"/registro",className:"login-options-footer-link",children:"RegÃ­strate aquÃ­"})]}),e.jsxs("p",{className:"login-options-footer-text",children:["Â¿Olvidaste tu contraseÃ±a?"," ",e.jsx("button",{className:"login-options-footer-link",children:"Recuperar contraseÃ±a"})]})]}),!1]})})};export{T as default};
